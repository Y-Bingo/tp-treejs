"use strict";(self.webpackChunktp_threejs=self.webpackChunktp_threejs||[]).push([[21,37],{752:(e,t,s)=>{s.d(t,{a:()=>n});var i=s(2212),a=s(5357);class n{constructor(e){this.appId="00",this.appName="BASE",this.width=a.c.width,this.height=a.c.height,this.canvas=null,this.viewCenter=new i.pc(0,0,0),this.handle=-1,this.canvas=e}initRender(){const e=new i.rc({antialias:!0,canvas:this.canvas});e.setSize(this.width,this.height),e.setClearColor("#000000",1),e.setPixelRatio(window.devicePixelRatio),this.renderer=e}initScene(){const e=new i.Qb;this.scene=e}initCamera(){}initLight(){}initModel(){}onCreating(){}onCreated(){}onRender(){}onDestroy(){}onResize(){}create(){this.onCreating(),this.initRender(),this.initScene(),this.initCamera(),this.initLight(),this.initModel(),this.onCreated()}render(){var e;null===(e=this.renderer)||void 0===e||e.clear(),this.onRender(),this.handle=requestAnimationFrame(this.render.bind(this))}run(){this.create(),this.render()}resize(){var e,t;this.width=window.innerWidth,this.height=window.innerHeight,this.camera&&this.camera instanceof i.zb&&(this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix()),null===(e=this.renderer)||void 0===e||e.setSize(this.width,this.height),null===(t=this.renderer)||void 0===t||t.setPixelRatio(Math.min(2,window.devicePixelRatio)),this.onResize()}destroy(){this.onDestroy(),this.scene.clear(),this.renderer.clear(),cancelAnimationFrame(this.handle),console.log(`销毁应用【${this.appId} ${this.appName}】`)}}},7079:(e,t,s)=>{s.r(t),s.d(t,{BaseJourney:()=>a});var i=s(752);class a extends i.a{}},3447:(e,t,s)=>{s.r(t),s.d(t,{Journey22:()=>r});var i=s(3687),a=s(4376),n=s(2212),h=s(9365),o=s(7079);class r extends o.BaseJourney{constructor(){super(...arguments),this.defaultMaterial=new n.lb({metalness:.3,roughness:.4}),this.boxGeometry=new n.i(1,1,1),this.objectUpdate=[],this.sphereGeometry=new n.Xb(1,32,32),this.lastTimeStamp=0}onCreating(){this.params={materialColor:16772589},this.clock=new n.r,this.gui=new a.a;const e=new i.i;e.gravity.set(0,-9.82,0),e.broadphase=new i.f(e),e.allowSleep=!0,this.world=e;const t=new i.d("default"),s=new i.c(t,t,{friction:.1,restitution:.7});e.defaultContactMaterial=s}onCreated(){this.controls=new h.a(this.camera,this.canvas),this.controls.enableDamping=!0,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=n.yb}initLight(){const e=new n.c(16777215,.7);this.scene.add(e);const t=new n.y(16777215,.2);t.castShadow=!0,t.shadow.mapSize.set(1024,1024),t.shadow.camera.far=15,t.shadow.camera.left=-7,t.shadow.camera.top=7,t.shadow.camera.right=7,t.shadow.camera.bottom=-7,t.position.set(5,5,5),this.scene.add(t)}initCamera(){const e=new n.zb(75,this.width/this.height,.1,100);e.position.set(-3,3,3),this.camera=e,this.scene.add(e)}createBox(e,t,s,a){const h=new n.nb(this.boxGeometry,this.defaultMaterial);h.castShadow=!0,h.scale.set(e,t,s),h.position.set(a.x,a.y,a.z),this.scene.add(h);const o=new i.b(new i.h(.5*e,.5*t,.5*s)),r=new i.a({mass:1,position:new i.h(a.x,a.y,a.z),shape:o});this.world.addBody(r),this.objectUpdate.push({mesh:h,body:r})}createSphere(e,t){const s=new n.nb(this.sphereGeometry,this.defaultMaterial);s.castShadow=!0,s.scale.set(e,e,e),s.position.set(t.x,t.y,t.z),this.scene.add(s);const a=new i.g(e),h=new i.a({mass:1,position:new i.h(t.x,t.y,t.z),shape:a});this.world.addBody(h),this.objectUpdate.push({mesh:s,body:h})}initModel(){(new n.u).load([""]);const e=new n.nb(new n.Ab(10,10),new n.lb({color:7829367,metalness:.3,roughness:.4}));e.rotation.x=.5*-Math.PI,e.receiveShadow=!0,this.scene.add(e);const t=new i.e,s=new i.a({mass:0,shape:t});s.quaternion.setFromAxisAngle(new i.h(1,0,0),.5*-Math.PI),this.world.addBody(s);const a=this.gui,h={};h.createBox=()=>{this.createBox(Math.random(),Math.random(),Math.random(),{x:3*(Math.random()-.5),y:3,z:3*(Math.random()-.5)})},h.createSphere=()=>{this.createSphere(.5,{x:3*(Math.random()-.5),y:3,z:3*(Math.random()-.5)})},h.reset=()=>{for(let e of this.objectUpdate)this.world.removeBody(e.body),this.scene.remove(e.mesh)},a.add(h,"createBox"),a.add(h,"createSphere"),a.add(h,"reset")}onRender(){this.controls.update(),this.renderer.render(this.scene,this.camera);const e=this.clock.getElapsedTime(),t=e-this.lastTimeStamp;this.lastTimeStamp=e,this.world.step(1/60,t,3);for(let e of this.objectUpdate)e.mesh.position.copy(e.body.position),e.mesh.quaternion.copy(e.body.quaternion)}onDestroy(){var e;null===(e=this.gui)||void 0===e||e.destroy()}}}}]);
//# sourceMappingURL=21.min_cf02189c98.js.map