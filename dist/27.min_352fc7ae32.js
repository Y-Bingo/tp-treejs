"use strict";(self.webpackChunktp_threejs=self.webpackChunktp_threejs||[]).push([[27,37],{7597:(e,t,a)=>{a.d(t,{c:()=>o,a:()=>i,b:()=>n});var s=a(2212);function o(e,t,a,s){a&&(e=e.addFolder(a)),e.add(t,"x",-10,10,.01).onChange(s),e.add(t,"y",0,10,.01).onChange(s),e.add(t,"z",-10,10,.01).onChange(s)}class i{constructor(e,t){this.obj=e,this.prop=t}get value(){return`#${this.obj[this.prop].getHexString()}`}set value(e){this.obj[this.prop].set(e)}}class n{constructor(e,t){this.obj=e,this.prop=t}get value(){return s.eb.radToDeg(this.obj[this.prop])}set value(e){this.obj[this.prop]=s.eb.degToRad(e)}}},752:(e,t,a)=>{a.d(t,{a:()=>i});var s=a(2212),o=a(5357);class i{constructor(e){this.appId="00",this.appName="BASE",this.width=o.c.width,this.height=o.c.height,this.canvas=null,this.viewCenter=new s.pc(0,0,0),this.handle=-1,this.canvas=e}initRender(){const e=new s.rc({antialias:!0,canvas:this.canvas});e.setSize(this.width,this.height),e.setClearColor("#000000",1),e.setPixelRatio(window.devicePixelRatio),this.renderer=e}initScene(){const e=new s.Qb;this.scene=e}initCamera(){}initLight(){}initModel(){}onCreating(){}onCreated(){}onRender(){}onDestroy(){}onResize(){}create(){this.onCreating(),this.initRender(),this.initScene(),this.initCamera(),this.initLight(),this.initModel(),this.onCreated()}render(){var e;null===(e=this.renderer)||void 0===e||e.clear(),this.onRender(),this.handle=requestAnimationFrame(this.render.bind(this))}run(){this.create(),this.render()}resize(){var e,t;this.width=window.innerWidth,this.height=window.innerHeight,this.camera&&this.camera instanceof s.zb&&(this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix()),null===(e=this.renderer)||void 0===e||e.setSize(this.width,this.height),null===(t=this.renderer)||void 0===t||t.setPixelRatio(Math.min(2,window.devicePixelRatio)),this.onResize()}destroy(){this.onDestroy(),this.scene.clear(),this.renderer.clear(),cancelAnimationFrame(this.handle),console.log(`销毁应用【${this.appId} ${this.appName}】`)}}},7079:(e,t,a)=>{a.r(t),a.d(t,{BaseJourney:()=>o});var s=a(752);class o extends s.a{}},4620:(e,t,a)=>{a.r(t),a.d(t,{Journey17:()=>h});var s=a(4376),o=a(2212),i=a(9365),n=a(7597),r=a(7079);class h extends r.BaseJourney{onCreating(){this.clock=new o.r,this.gui=new s.a}onCreated(){this.controls=new i.a(this.camera,this.canvas),this.controls.enableDamping=!0}initCamera(){const e=new o.zb(75,this.width/this.height);e.position.set(0,4,8),e.lookAt(new o.pc(0,0,0)),this.camera=e,this.scene.add(e)}initLight(){const e=this.scene,t=new o.c(12178943,.3),a=this.gui.addFolder("AmbientLight");a.add(t,"intensity",0,1,.01),a.add(t,"visible"),a.addColor(new n.a(t,"color"),"value").name("color"),e.add(t);const s=this.gui.addFolder("DirectionalLight"),i=new o.y(12178943,.12);i.shadow.mapSize.width=256,i.shadow.mapSize.height=256,i.shadow.camera.far=15,i.position.set(4,5,-2),s.add(i,"intensity").min(0).max(1.3).step(.01),s.add(i,"visible"),s.addColor(new n.a(i,"color"),"value").name("color"),(0,n.c)(s,i.position,null,(()=>{})),e.add(i)}initModel(){(new o.lb).roughness=.7;const e=new o.ec,t=e.load("./resource/journey/door/color.jpg"),a=e.load("./resource/journey/door/alpha.jpg"),s=e.load("./resource/journey/door/ambientOcclusion.jpg"),i=e.load("./resource/journey/door/height.jpg"),n=e.load("./resource/journey/door/normal.jpg"),r=e.load("./resource/journey/door/metalness.jpg"),h=e.load("./resource/journey/door/roughness.jpg"),d=e.load("./resource/journey/bricks/color.jpg"),c=e.load("./resource/journey/bricks/ambientOcclusion.jpg"),l=e.load("./resource/journey/bricks/normal.jpg"),p=e.load("./resource/journey/bricks/roughness.jpg"),w=e.load("./resource/journey/grass/color.jpg"),u=e.load("./resource/journey/grass/ambientOcclusion.jpg"),g=e.load("./resource/journey/grass/normal.jpg"),b=e.load("./resource/journey/grass/roughness.jpg");w.repeat.set(8,8),u.repeat.set(8,8),g.repeat.set(8,8),b.repeat.set(8,8),w.wrapS=o.Ob,u.wrapS=o.Ob,g.wrapS=o.Ob,b.wrapS=o.Ob,w.wrapT=o.Ob,u.wrapT=o.Ob,g.wrapT=o.Ob,b.wrapT=o.Ob;const m=new o.F(2500663,1,15);this.scene.fog=m,this.renderer.setClearColor(2500663);const y=new o.I,j=new o.nb(new o.i(4,2.5,4),new o.lb({map:d,aoMap:c,normalMap:l,roughnessMap:p}));j.geometry.setAttribute("uv2",new o.E(j.geometry.attributes.uv.array,2)),j.position.y=1.25,y.add(j);const v=new o.nb(new o.t(3.5,1,4),new o.gb({color:11755333}));v.position.set(0,3,0),v.rotation.y=Math.PI/4,y.add(v);const M=new o.nb(new o.Ab(2,2,100,100),new o.lb({map:t,alphaMap:a,transparent:!0,aoMap:s,displacementMap:i,displacementScale:.1,normalMap:n,metalnessMap:r,roughnessMap:h}));M.geometry.setAttribute("uv2",new o.E(M.geometry.attributes.uv.array,2)),M.position.y=1,M.position.z=2.01,y.add(M);const S=new o.Xb(1,16,16),z=new o.lb({color:9029716}),C=new o.nb(S,z);C.scale.set(.5,.5,.5),C.position.set(1.8,.2,2.2);const f=new o.nb(S,z);f.scale.set(.25,.25,.25),f.position.set(1.2,.2,2.2);const x=new o.nb(S,z);x.scale.set(.4,.4,.4),x.position.set(-1.6,.2,2);const A=new o.nb(S,z);A.scale.set(.15,.15,.15),A.position.set(-1.6,.2,2.4);const R=new o.Db(16743750,1,7);R.castShadow=!0,R.shadow.mapSize.width=256,R.shadow.mapSize.height=256,R.shadow.camera.far=7,R.position.set(0,2,2.7),y.add(C,f,x,A,R);const k=new o.I,O=new o.lb({color:7500402}),D=new o.i(.6,.8,.1);for(let e=0;e<30;e++){const e=Math.random()*Math.PI*2,t=3+6*Math.random(),a=Math.sin(e)*t,s=Math.cos(e)*t,i=new o.nb(D,O);i.castShadow=!0,i.position.set(a,.3,s),i.rotation.y=.4*(Math.random()-.5),i.rotation.z=.4*(Math.random()-.5),k.add(i)}const P=new o.nb(new o.Ab(20,20),new o.lb({map:w,aoMap:u,normalMap:g,roughnessMap:b}));P.geometry.setAttribute("uv2",new o.E(P.geometry.attributes.uv.array,2)),P.rotation.x=.5*-Math.PI,this.scene.add(P,y,k);const I=new o.Db(16711935,2,3),T=new o.Db(65535,2,3),E=new o.Db(16776960,2,3);this.scene.add(I,T,E),this.ghostArr=[I,T,E],I.castShadow=!0,I.shadow.mapSize.width=256,I.shadow.mapSize.height=256,I.shadow.camera.far=7,T.castShadow=!0,T.shadow.mapSize.width=256,T.shadow.mapSize.height=256,T.shadow.camera.far=7,E.castShadow=!0,E.shadow.mapSize.width=256,E.shadow.mapSize.height=256,E.shadow.camera.far=7,C.castShadow=!0,f.castShadow=!0,x.castShadow=!0,A.castShadow=!0,P.receiveShadow=!0,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=o.yb}onRender(){this.controls.update(),this.renderer.render(this.scene,this.camera);const e=this.clock.getElapsedTime();this.ghostArr.forEach(((t,a)=>{const s=Math.pow(-1,a)*e*(.3+.1*a);t.position.x=Math.cos(s)*(4+a),t.position.y=Math.sin(s)*(4+a),t.position.z=Math.sin(s)*(4+a)}))}onDestroy(){var e;null===(e=this.gui)||void 0===e||e.destroy()}}}}]);
//# sourceMappingURL=27.min_352fc7ae32.js.map