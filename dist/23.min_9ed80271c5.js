"use strict";(self.webpackChunktp_threejs=self.webpackChunktp_threejs||[]).push([[23,37],{752:(e,t,i)=>{i.d(t,{a:()=>r});var n=i(2212),s=i(5357);class r{constructor(e){this.appId="00",this.appName="BASE",this.width=s.c.width,this.height=s.c.height,this.canvas=null,this.viewCenter=new n.pc(0,0,0),this.handle=-1,this.canvas=e}initRender(){const e=new n.rc({antialias:!0,canvas:this.canvas});e.setSize(this.width,this.height),e.setClearColor("#000000",1),e.setPixelRatio(window.devicePixelRatio),this.renderer=e}initScene(){const e=new n.Qb;this.scene=e}initCamera(){}initLight(){}initModel(){}onCreating(){}onCreated(){}onRender(){}onDestroy(){}onResize(){}create(){this.onCreating(),this.initRender(),this.initScene(),this.initCamera(),this.initLight(),this.initModel(),this.onCreated()}render(){var e;null===(e=this.renderer)||void 0===e||e.clear(),this.onRender(),this.handle=requestAnimationFrame(this.render.bind(this))}run(){this.create(),this.render()}resize(){var e,t;this.width=window.innerWidth,this.height=window.innerHeight,this.camera&&this.camera instanceof n.zb&&(this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix()),null===(e=this.renderer)||void 0===e||e.setSize(this.width,this.height),null===(t=this.renderer)||void 0===t||t.setPixelRatio(Math.min(2,window.devicePixelRatio)),this.onResize()}destroy(){this.onDestroy(),this.scene.clear(),this.renderer.clear(),cancelAnimationFrame(this.handle),console.log(`销毁应用【${this.appId} ${this.appName}】`)}}},7079:(e,t,i)=>{i.r(t),i.d(t,{BaseJourney:()=>s});var n=i(752);class s extends n.a{}},3953:(e,t,i)=>{i.r(t),i.d(t,{Journey31:()=>d});var n=i(4376),s=i(2212),r=i(9365),a=i(2854),o=i(1217),h=i(7079);class d extends h.BaseJourney{constructor(){super(...arguments),this.lastTimeStamp=0}onCreating(){this.params={envMapIntensity:5},this.clock=new s.r,this.gui=new n.a}onCreated(){this.controls=new r.a(this.camera,this.canvas),this.controls.enableDamping=!0,this.renderer.physicallyCorrectLights=!0,this.renderer.outputEncoding=s.sc,this.renderer.toneMapping=s.a,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=s.yb,this.gui.add(this.renderer,"toneMapping",{No:s.sb,Linear:s.Z,Cineon:s.o,Reinhard:s.Nb,ACESF:s.a}).onFinishChange((()=>{this.renderer.toneMapping=Number(this.renderer.toneMapping),this.updateAllMaterial()})),this.gui.add(this.renderer,"toneMappingExposure").min(0).max(10).step(.01)}initLight(){const e=new s.y(16777215,3);e.position.set(.25,3,-2.25),e.shadow.mapSize.set(1024,1024),e.castShadow=!0,e.shadow.camera.far=15,e.shadow.normalBias=.05,this.scene.add(e),this.gui.add(e,"intensity").min(0).max(10).step(.01).name("lightIntensity"),this.gui.add(e.position,"x").min(-5).max(5).step(.01).name("lightX"),this.gui.add(e.position,"y").min(-5).max(5).step(.01).name("lightY"),this.gui.add(e.position,"z").min(-5).max(5).step(.01).name("lightZ")}initCamera(){const e=new s.zb(75,this.width/this.height,.1,100);e.position.set(5,2,-5),this.camera=e,this.scene.add(e)}initModel(){const e=this.scene,t=new s.ec,i=(new s.u).load(["resource/journey/environmentMaps/0/px.jpg","resource/journey/environmentMaps/0/nx.jpg","resource/journey/environmentMaps/0/py.jpg","resource/journey/environmentMaps/0/ny.jpg","resource/journey/environmentMaps/0/pz.jpg","resource/journey/environmentMaps/0/nz.jpg"]);i.encoding=s.sc,e.background=i,e.environment=i;const n=new a.a;n.setDecoderPath("resource/draco/");const r=new o.a;r.setDRACOLoader(n);const h=t.load("./resource/journey/models/LeePerrySmith/color.jpg"),d=t.load("./resource/journey/models/LeePerrySmith/normal.jpg"),c=new s.lb({map:h,normalMap:d});c.onBeforeCompile=(e,t)=>{e.vertexShader=e.vertexShader.replace("#include <begin_vertex>","\n                    #include <begin_vertex>\n                    \n                ")},r.load("./resource/journey/models/LeePerrySmith/LeePerrySmith.glb",(t=>{const i=t.scene.children[0];i.rotation.y=.5*Math.PI,i.material=c,e.add(i),this.updateAllMaterial()}),(()=>{console.log("progress")}),(e=>{console.log("error",e)}))}updateAllMaterial(){this.scene.traverse((e=>{e instanceof s.nb&&e.material instanceof s.lb&&(e.material.envMapIntensity=this.params.envMapIntensity,e.material.needsUpdate=!0,e.receiveShadow=!0,e.castShadow=!0)}))}onRender(){this.controls.update(),this.renderer.render(this.scene,this.camera);const e=this.clock.getElapsedTime();this.lastTimeStamp;this.lastTimeStamp=e}onDestroy(){var e;null===(e=this.gui)||void 0===e||e.destroy()}}}}]);
//# sourceMappingURL=23.min_9ed80271c5.js.map